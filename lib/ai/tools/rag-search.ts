import { tool } from "ai";
import { z } from "zod";

// Types exported for use in other files
export interface Chunk {
    chunkContent: string;
    chunkId: string;
    pageId?: string;
    score: number; // Relevance score (0-1)
}

export interface DocumentSearchResult {
    documentId: string;
    fileName: string;
    fileType: string; // MIME type, e.g., "application/pdf"
    size: number; // File size in bytes
    sourcePath: string; // File path or URL to the source
    score: number; // Document relevance score (0-1)
    chunks: Chunk[];
}

export interface RagToolResult {
    success: boolean;
    message: string;
    results: DocumentSearchResult[];
}

export const RagParamsSchema = z.object({
    query: z.string().describe("The search query to find relevant documents for.")
});

export type RagParams = z.infer<typeof RagParamsSchema>;

export const ragSearch = tool<RagParams, RagToolResult>({
    description: "Search for relevant documents. Returns a list of documents with chunks.",
    inputSchema: RagParamsSchema,
    execute: async (input, ctx) => {
        // TODO: Implement actual RAG search
        // Stub data for now
        const results: DocumentSearchResult[] = [
            {
                documentId: "doc-ml-guide",
                fileName: "×™×¡×•×“×•×ª-×œ××™×“×ª-××›×•× ×”.pdf",
                fileType: "application/pdf",
                size: 2458000,
                sourcePath: "/research/ai/machine-learning-fundamentals.pdf",
                score: 0.96,
                chunks: [
                    {
                        chunkId: "ml-1",
                        chunkContent: `## ××‘×•× ×œ×œ××™×“×ª ××›×•× ×”

×œ××™×“×ª ××›×•× ×” ×”×™× ×ª×ª-×ª×—×•× ×©×œ ×‘×™× ×” ××œ××›×•×ª×™×ª (AI) ×”×××¤×©×¨×ª ×œ××¢×¨×›×•×ª **×œ×œ××•×“ ×•×œ×”×©×ª×¤×¨ ×× ×™×¡×™×•×Ÿ** ××‘×œ×™ ×œ×”×™×•×ª ××ª×•×›× ×ª×•×ª ×‘××¤×•×¨×©. ×”××˜×¨×” ×”×¢×™×§×¨×™×ª ×”×™× ×œ××¤×©×¨ ×œ××—×©×‘×™× ×œ×œ××•×“ ×‘××•×¤×Ÿ ××•×˜×•××˜×™ ×œ×œ× ×”×ª×¢×¨×‘×•×ª ×× ×•×©×™×ª.

### ××•×©×’×™ ×™×¡×•×“

- **×œ××™×“×” ××•× ×—×™×ª (Supervised)**: ××™××•×Ÿ ×¢× × ×ª×•× ×™× ××ª×•×™×’×™×
- **×œ××™×“×” ×‘×œ×ª×™ ××•× ×—×™×ª (Unsupervised)**: ××¦×™××ª ×“×¤×•×¡×™× ×‘× ×ª×•× ×™× ×œ× ××ª×•×™×’×™×
- **×œ××™×“×ª ×—×™×–×•×§ (Reinforcement)**: ×œ××™×“×” ×‘×××¦×¢×•×ª × ×™×¡×•×™ ×•×˜×¢×™×™×”

×”×ª×—×•× ×–×›×” ×œ×¦××™×—×” ××“×™×¨×” ×××– ×”×¢×©×•×¨ ×©×œ 2010, ××•× ×¢ ×¢×œ ×™×“×™ ×”×ª×§×“××•×ª ×‘×›×•×— ×”××—×©×•×‘ ×•×–××™× ×•×ª ×©×œ ××¢×¨×›×™ × ×ª×•× ×™× ×’×“×•×œ×™×.`,
                        pageId: "1",
                        score: 0.94
                    },
                    {
                        chunkId: "ml-2",
                        chunkContent: `### ××¨×›×™×˜×§×˜×•×¨×ª ×¨×©×ª ×¢×¦×‘×™×ª

×¨×©×ª ×¢×¦×‘×™×ª ××•×¨×›×‘×ª ××¦××ª×™× (× ×•×™×¨×•× ×™×) ××—×•×‘×¨×™× ×”×××•×¨×’× ×™× ×‘×©×›×‘×•×ª:

1. **×©×›×‘×ª ×§×œ×˜**: ××§×‘×œ×ª ××ª ×”× ×ª×•× ×™× ×”×¨××©×•× ×™×™×
2. **×©×›×‘×•×ª × ×¡×ª×¨×•×ª**: ××¢×‘×“×•×ª ××™×“×¢ ×‘×××¦×¢×•×ª ×—×™×‘×•×¨×™× ××©×•×§×œ×œ×™×
3. **×©×›×‘×ª ×¤×œ×˜**: ××™×™×¦×¨×ª ××ª ×”×—×™×–×•×™ ×”×¡×•×¤×™

×œ×›×œ ×—×™×‘×•×¨ ×™×© **××©×§×œ** ××©×•×™×š ×”××•×ª×× ×‘××”×œ×š ×”××™××•×Ÿ. ×¤×•× ×§×¦×™×™×ª ×”×”×¤×¢×œ×” ×§×•×‘×¢×ª ×× × ×•×™×¨×•×Ÿ ×¦×¨×™×š ×œ×”×™×•×ª ××•×¤×¢×œ ×¢×œ ×¡××š ×”×¡×›×•× ×”××©×•×§×œ×œ ×©×œ ×”×ª×©×•××•×ª.

×¤×•× ×§×¦×™×•×ª ×”×¤×¢×œ×” × ×¤×•×¦×•×ª ×›×•×œ×œ×•×ª:
- ReLU (Rectified Linear Unit)
- Sigmoid
- Tanh`,
                        pageId: "3",
                        score: 0.91
                    },
                    {
                        chunkId: "ml-3",
                        chunkContent: `### ×ª×”×œ×™×š ×”××™××•×Ÿ

×ª×”×œ×™×š ×”××™××•×Ÿ ×›×•×œ×œ ××ª ×”×©×œ×‘×™× ×”×‘××™×:

1. **×”×ª×¤×©×˜×•×ª ×§×“×™××” (Forward Propagation)**: × ×ª×•× ×™ ×§×œ×˜ ×–×•×¨××™× ×“×¨×š ×”×¨×©×ª
2. **×—×™×©×•×‘ ×”×¤×¡×“ (Loss Calculation)**: ×”×©×•×•××ª ×”×¤×œ×˜ ×”×—×–×•×™ ×œ×¢×¨×›×™× ×”×××™×ª×™×™×
3. **×”×ª×¤×©×˜×•×ª ×œ××—×•×¨ (Backpropagation)**: ×—×™×©×•×‘ ×”×©×™×¤×•×¢×™× (gradients) ×©×œ ×¤×•× ×§×¦×™×™×ª ×”×”×¤×¡×“
4. **×¢×“×›×•×Ÿ ××©×§×œ×™×**: ×”×ª×××ª ××©×§×œ×™× ×‘×××¦×¢×•×ª ××•×¤×˜×™××™×™×–×¨ (×œ××©×œ, SGD, Adam)

> **×”×¢×¨×”**: ×§×¦×‘ ×”×œ××™×“×” ×”×•× ×”×™×¤×¨-×¤×¨××˜×¨ ×§×¨×™×˜×™ ×”×©×•×œ×˜ ×‘×›××” ×œ×”×ª××™× ××ª ×”××©×§×œ×™× ×‘××”×œ×š ×›×œ ×¢×“×›×•×Ÿ.

×”××™××•×Ÿ × ××©×š ×‘××©×š ××¡×¤×¨ **×¢×™×“× ×™× (epochs)** ×¢×“ ×©×”××•×“×œ ××ª×›× ×¡ ××• ××’×™×¢ ×œ×§×¨×™×˜×¨×™×•×Ÿ ×¢×¦×™×¨×”.`,
                        pageId: "5",
                        score: 0.88
                    },
                    {
                        chunkId: "ml-4",
                        chunkContent: `### ×”×ª×××ª ×™×ª×¨ (Overfitting) ×•×¨×’×•×œ×¨×™×–×¦×™×”

**×”×ª×××ª ×™×ª×¨** ××ª×¨×—×©×ª ×›××©×¨ ××•×“×œ ×œ×•××“ ××ª × ×ª×•× ×™ ×”××™××•×Ÿ ×˜×•×‘ ××“×™, ×›×•×œ×œ ×¨×¢×© ×•×—×¨×™×’×™×, ××” ×©××•×‘×™×œ ×œ×”×›×œ×œ×” ×’×¨×•×¢×” ×¢×œ × ×ª×•× ×™× ×—×“×©×™×.

#### ×˜×›× ×™×§×•×ª ×× ×™×¢×”:

| ×˜×›× ×™×§×” | ×ª×™××•×¨ |
|--------|-------|
| Dropout | ×”×©×‘×ª×” ××§×¨××™×ª ×©×œ × ×•×™×¨×•× ×™× ×‘××”×œ×š ×”××™××•×Ÿ |
| ×¨×’×•×œ×¨×™×–×¦×™×™×ª L1/L2 | ×”×•×¡×¤×ª ××™×‘×¨×™ ×¢× ×™×©×” ×œ×¤×•× ×§×¦×™×™×ª ×”×”×¤×¡×“ |
| ×¢×¦×™×¨×” ××•×§×“××ª | ×”×¤×¡×§×ª ×”××™××•×Ÿ ×›××©×¨ ××•×‘×“×Ÿ ×”××™××•×ª (validation loss) ×’×“×œ |
| ×”×¢×©×¨×ª × ×ª×•× ×™× (Data Augmentation) | ×”×¨×—×‘×” ××œ××›×•×ª×™×ª ×©×œ ××¢×¨×š × ×ª×•× ×™ ×”××™××•×Ÿ |

××™××•×ª ×¦×•×œ×‘ (Cross-validation) ×—×™×•× ×™ ×œ×–×™×”×•×™ ××•×§×“× ×©×œ ×”×ª×××ª ×™×ª×¨ ×‘×ª×”×œ×™×š ×”×¤×™×ª×•×—.`,
                        pageId: "8",
                        score: 0.85
                    },
                    {
                        chunkId: "ml-5",
                        chunkContent: `### ××“×“×™ ×”×¢×¨×›×ª ××•×“×œ

××“×“×™× ×©×•× ×™× ××©××©×™× ×‘×”×ª×× ×œ×¡×•×’ ×”×‘×¢×™×”:

**××“×“×™ ×¡×™×•×•×’ (Classification):**
- ×“×™×•×§ (Accuracy): × ×›×•× ×•×ª ×›×•×œ×œ×ª
- ×“×™×•×§ (Precision): ×—×™×•×‘×™×™× ×××™×ª×™×™× / (×—×™×•×‘×™×™× ×××™×ª×™×™× + ×—×™×•×‘×™×™× ×©×’×•×™×™×)
- ×–×™×›×¨×•×Ÿ (Recall): ×—×™×•×‘×™×™× ×××™×ª×™×™× / (×—×™×•×‘×™×™× ×××™×ª×™×™× + ×©×œ×™×œ×™×™× ×©×’×•×™×™×)
- ×¦×™×•×Ÿ F1: ×××•×¦×¢ ×”×¨××•× ×™ ×©×œ ×“×™×•×§ ×•×–×™×›×¨×•×Ÿ

**××“×“×™ ×¨×’×¨×¡×™×” (Regression):**
- MSE (×©×’×™××” ×¨×™×‘×•×¢×™×ª ×××•×¦×¢×ª)
- RMSE (×©×•×¨×© ×©×’×™××” ×¨×™×‘×•×¢×™×ª ×××•×¦×¢×ª)
- MAE (×©×’×™××” ××•×—×œ×˜×ª ×××•×¦×¢×ª)
- ×¦×™×•×Ÿ RÂ²

×ª××™×“ ×©×§×•×œ ××ª ×”×”×§×©×¨ ×”×¢×¡×§×™ ×‘×¢×ª ×‘×—×™×¨×ª ××“×“×™ ×”×¢×¨×›×”.`,
                        pageId: "12",
                        score: 0.82
                    },
                    {
                        chunkId: "ml-6",
                        chunkContent: `### ×›×•×•× ×•×Ÿ ×”×™×¤×¨-×¤×¨××˜×¨×™×

×”×™×¤×¨-×¤×¨××˜×¨×™× ×”× ×¤×¨××˜×¨×™× ×©× ×§×‘×¢×™× ×œ×¤× ×™ ×ª×—×™×œ×ª ×”××™××•×Ÿ. ×’×™×©×•×ª × ×¤×•×¦×•×ª ×œ××•×¤×˜×™××™×–×¦×™×”:

1. **Grid Search**: ×—×™×¤×•×© ×××¦×” ×¢×œ ×¢×¨×›×™ ×¤×¨××˜×¨×™× ××•×’×“×¨×™×
2. **Random Search**: ×“×’×™××” ××§×¨××™×ª ×©×œ ×©×™×œ×•×‘×™ ×¤×¨××˜×¨×™×
3. **Bayesian Optimization**: ×©×™××•×© ×‘××•×“×œ×™× ××ª××˜×™×™× ×œ××¦×™××ª ×¤×¨××˜×¨×™× ××•×¤×˜×™××œ×™×™×

\`\`\`python
from sklearn.model_selection import GridSearchCV

param_grid = {
    'learning_rate': [0.01, 0.1, 0.001],
    'n_estimators': [100, 200, 300]
}
\`\`\`

×›×œ×™ AutoML ×™×›×•×œ×™× ×œ×¢×–×•×¨ ×œ×™×™×¢×œ ×ª×”×œ×™×š ×–×” ×¢×‘×•×¨ ××•×“×œ×™× ××•×¨×›×‘×™×.`,
                        pageId: "15",
                        score: 0.79
                    }
                ]
            },
            {
                documentId: "doc-security",
                fileName: "×©×™×˜×•×ª-××•××œ×¦×•×ª-×œ××‘×˜×—×ª-×¡×™×™×‘×¨.pdf",
                fileType: "application/pdf",
                size: 1876000,
                sourcePath: "/policies/security/cybersecurity-best-practices.pdf",
                score: 0.89,
                chunks: [
                    {
                        chunkId: "sec-1",
                        chunkContent: `## ×¡×§×™×¨×ª ××¡×’×¨×ª ××‘×˜×—×ª ×¡×™×™×‘×¨

××¨×’×•× ×™× ×—×™×™×‘×™× ×œ×™×™×©× ××¡×’×¨×ª ××‘×˜×—×” ××§×™×¤×” ×›×“×™ ×œ×”×’×Ÿ ××¤× ×™ ××™×•××™× ××ª×¤×ª×—×™×. ××¡×’×¨×ª ××‘×˜×—×ª ×”×¡×™×™×‘×¨ ×©×œ NIST ××¡×¤×§×ª ×’×™×©×” ××•×‘× ×™×ª ×¢× ×—××© ×¤×•× ×§×¦×™×•×ª ×œ×™×‘×”:

1. **×–×™×”×•×™ (Identify)**: ×”×‘× ×ª ×”×”×§×©×¨ ×”××¨×’×•× ×™ ×•×”×¡×™×›×•× ×™×
2. **×”×’× ×” (Protect)**: ×™×™×©×•× ×××¦×¢×™ ×”×’× ×” ××ª××™××™×
3. **×’×™×œ×•×™ (Detect)**: ×¤×™×ª×•×— ×¤×¢×™×œ×•×™×•×ª ×œ×–×™×”×•×™ ××™×¨×•×¢×™ ××‘×˜×—×”
4. **×ª×’×•×‘×” (Respond)**: × ×§×™×˜×ª ×¤×¢×•×œ×” ×œ×’×‘×™ ×ª×§×¨×™×•×ª ×©×”×ª×’×œ×•
5. **×”×ª××•×©×©×•×ª (Recover)**: ×©××™×¨×” ×¢×œ ×—×•×¡×Ÿ ×•×©×—×–×•×¨ ×™×›×•×œ×•×ª

×›×œ ×¤×•× ×§×¦×™×” ××›×™×œ×” ×§×˜×’×•×¨×™×•×ª ×•×ª×ª×™-×§×˜×’×•×¨×™×•×ª ×”×× ×—×•×ª ××ª ××××¦×™ ×”×™×™×©×•×.`,
                        pageId: "2",
                        score: 0.87
                    },
                    {
                        chunkId: "sec-2",
                        chunkContent: `### ××™××•×ª ×•×‘×§×¨×ª ×’×™×©×”

×™×™×©×•× ××™××•×ª ×—×–×§ ×”×•× ×§×¨×™×˜×™ ×œ××‘×˜×—×ª ×”××¨×’×•×Ÿ:

**××™××•×ª ×¨×‘-×’×•×¨××™ (MFA):**
- ××©×”×• ×©××ª×” ×™×•×“×¢ (×¡×™×¡××”)
- ××©×”×• ×©×™×© ×œ×š (××¡×™××•×Ÿ ××‘×˜×—×”)
- ××©×”×• ×©××ª×” (×‘×™×•××˜×¨×™×”)

> **×©×™×˜×” ××•××œ×¦×ª**: ××›×•×£ MFA ×¢×‘×•×¨ ×›×œ ×”×—×©×‘×•× ×•×ª ×”××™×•×—×¡×™× ×•×”×’×™×©×” ××¨×—×•×§.

×‘×§×¨×ª ×’×™×©×” ×¦×¨×™×›×” ×œ×¤×¢×•×œ ×œ×¤×™ **×¢×§×¨×•×Ÿ ×”×–×›×•×ª ×”××™× ×™××œ×™×ª** (Least Privilege) â€” ×œ××©×ª××©×™× ×¦×¨×™×›×” ×œ×”×™×•×ª ×’×™×©×” ×¨×§ ×œ××©××‘×™× ×”×“×¨×•×©×™× ×œ×ª×¤×§×™×“×. ×¡×§×™×¨×•×ª ×’×™×©×” ×¡×“×™×¨×•×ª ××¡×™×™×¢×•×ª ×œ×–×”×•×ª ×•×œ×”×¡×™×¨ ×”×¨×©××•×ª ××™×•×ª×¨×•×ª.`,
                        pageId: "7",
                        score: 0.84
                    },
                    {
                        chunkId: "sec-3",
                        chunkContent: `### ××¨×›×™×˜×§×˜×•×¨×ª ××‘×˜×—×ª ×¨×©×ª

×’×™×©×ª ×”×’× ×” ×œ×¢×•××§ ×“×•×¨×©×ª ××¡×¤×¨ ×©×›×‘×•×ª ××‘×˜×—×”:

| ×©×›×‘×” | ×‘×§×¨×•×ª |
|-------|----------|
| ×”×™×§×£ (Perimeter) | Firewalls, IDS/IPS, WAF |
| ×¨×©×ª | Segmentation, VLANs, NAC |
| × ×§×•×“×ª ×§×¦×” (Endpoint) | EDR, Antivirus, Host firewall |
| ×™×™×©×•× | ××™××•×ª ×§×œ×˜, ×”×¦×¤× ×” |
| × ×ª×•× ×™× | ×”×¦×¤× ×” ×‘×× ×•×—×”, DLP |

**××¨×›×™×˜×§×˜×•×¨×ª ××¤×¡ ×××•×Ÿ (Zero Trust)** ×× ×™×—×” ×©××™×Ÿ ×××•×Ÿ ××©×ª××¢, ×”×“×•×¨×©×ª ××™××•×ª ×¢×‘×•×¨ ×›×œ ×‘×§×©×ª ×’×™×©×” ×œ×œ× ×§×©×¨ ×œ××™×§×•× ××• ×œ××§×˜×¢ ×”×¨×©×ª.`,
                        pageId: "12",
                        score: 0.81
                    },
                    {
                        chunkId: "sec-4",
                        chunkContent: `### ×ª×›× ×•×Ÿ ×ª×’×•×‘×” ×œ××™×¨×•×¢×™×

×ª×•×›× ×™×ª ×™×¢×™×œ×” ×œ×ª×’×•×‘×” ×œ××™×¨×•×¢×™× ×›×•×œ×œ×ª ××ª ×”×©×œ×‘×™× ×”×‘××™×:

1. **×”×›× ×”**: ×§×‘×™×¢×ª ××“×™× ×™×•×ª, × ×”×œ×™× ×•×¦×•×•×ª
2. **×–×™×”×•×™**: ××™×ª×•×¨ ×•×§×‘×™×¢×ª ×”×™×§×£ ×”××™×¨×•×¢
3. **×”×›×œ×”**: ×”×’×‘×œ×ª ×”× ×–×§ ×•×× ×™×¢×ª ×”×ª×¤×©×˜×•×ª
4. **×‘×™×¢×•×¨**: ×”×¡×¨×ª ×”××™×•× ××”×¡×‘×™×‘×”
5. **×”×ª××•×©×©×•×ª**: ×©×—×–×•×¨ ××¢×¨×›×•×ª ×œ×¤×¢×•×œ×” ×¨×’×™×œ×”
6. **×”×¤×§×ª ×œ×§×—×™×**: ×ª×™×¢×•×“ ×××¦××™× ×•×©×™×¤×•×¨

×©××•×¨ ×¢×œ **×¨×©×™××ª ×× ×©×™ ×§×©×¨** ××¢×•×“×›× ×ª ×œ×¦×•×•×ª×™× ×¤× ×™××™×™×, ×¡×¤×§×™× ×—×™×¦×•× ×™×™× ×•×¨×©×•×™×•×ª ××›×™×¤×ª ×”×—×•×§. ×‘×¦×¢ ×ª×¨×’×™×œ×™ ×©×•×œ×—×Ÿ ×‘××•×¤×Ÿ ×§×‘×•×¢ ×œ×‘×“×™×§×ª ×™×›×•×œ×•×ª ×”×ª×’×•×‘×”.`,
                        pageId: "18",
                        score: 0.78
                    },
                    {
                        chunkId: "sec-5",
                        chunkContent: `### ×”×’× ×” ×¢×œ × ×ª×•× ×™× ×•×”×¦×¤× ×”

×™×© ×œ×”×’×Ÿ ×¢×œ × ×ª×•× ×™× ×¨×’×™×©×™× ×œ××•×¨×š ×›×œ ××—×–×•×¨ ×”×—×™×™× ×©×œ×”×:

**×ª×§× ×™ ×”×¦×¤× ×”:**
- AES-256 ×œ× ×ª×•× ×™× ×‘×× ×•×—×”
- TLS 1.3 ×œ× ×ª×•× ×™× ×‘××¢×‘×¨
- RSA-2048 ××• ECDSA ×œ×”×¦×¤× ×” ××¡×™××˜×¨×™×ª

**× ×™×”×•×œ ××¤×ª×—×•×ª:**
- ×”×—×œ×£ ××¤×ª×—×•×ª ×‘××•×¤×Ÿ ×§×‘×•×¢ (×œ×¤×—×•×ª ×¤×¢× ×‘×©× ×”)
- ××—×¡×Ÿ ××¤×ª×—×•×ª ×‘××•×“×•×œ×™ ××‘×˜×—×ª ×—×•××¨×” (HSMs)
- ×™×™×©× ×”×¤×§×“×ª ××¤×ª×—×•×ª ×œ×”××©×›×™×•×ª ×¢×¡×§×™×ª

×¡×™×•×•×’ × ×ª×•× ×™× (×¦×™×‘×•×¨×™, ×¤× ×™××™, ×¡×•×“×™, ××•×’×‘×œ) ××¡×™×™×¢ ×‘×§×‘×™×¢×ª ×¨××•×ª ×”×”×’× ×” ×•× ×”×œ×™ ×”×˜×™×¤×•×œ ×”××ª××™××™×.`,
                        pageId: "23",
                        score: 0.75
                    }
                ]
            },
            {
                documentId: "doc-cloud",
                fileName: "×ª×‘× ×™×•×ª-××¨×›×™×˜×§×˜×•×¨×ª-×¢× ×Ÿ.pdf",
                fileType: "application/pdf",
                size: 3245000,
                sourcePath: "/technical/architecture/cloud-architecture-patterns.pdf",
                score: 0.85,
                chunks: [
                    {
                        chunkId: "cloud-1",
                        chunkContent: `## ×™×¡×•×“×•×ª ××¨×›×™×˜×§×˜×•×¨×ª ×¢× ×Ÿ

××—×©×•×‘ ×¢× ×Ÿ ××¡×¤×§ ×’×™×©×” ×œ××©××‘×™ ××—×©×•×‘ ×¢×œ ×¤×™ ×“×¨×™×©×” ×“×¨×š ×”××™× ×˜×¨× ×˜. ×”×‘× ×ª ××•×“×œ×™ ×”×©×™×¨×•×ª ×—×™×•× ×™×ª:

### ××•×“×œ×™ ×©×™×¨×•×ª

- **IaaS (×ª×©×ª×™×•×ª ×›×©×™×¨×•×ª)**: ××›×•× ×•×ª ×•×™×¨×˜×•××œ×™×•×ª, ××—×¡×•×Ÿ, ×¨×©×ª×•×ª
- **PaaS (×¤×œ×˜×¤×•×¨××” ×›×©×™×¨×•×ª)**: ×¤×œ×˜×¤×•×¨××•×ª ×¤×™×ª×•×—, ××¡×“×™ × ×ª×•× ×™×
- **SaaS (×ª×•×›× ×” ×›×©×™×¨×•×ª)**: ×™×™×©×•××™× ××œ××™×

### ××•×“×œ×™ ×¤×¨×™×¡×”

- ×¢× ×Ÿ ×¦×™×‘×•×¨×™: ×ª×©×ª×™×ª ××©×•×ª×¤×ª, ×× ×•×”×œ×ª ×¢×œ ×™×“×™ ×”×¡×¤×§
- ×¢× ×Ÿ ×¤×¨×˜×™: ×ª×©×ª×™×ª ×™×™×¢×•×“×™×ª, ×‘×©×œ×™×˜×ª ×”××¨×’×•×Ÿ
- ×¢× ×Ÿ ×”×™×‘×¨×™×“×™: ×©×™×œ×•×‘ ×©×œ ×¦×™×‘×•×¨×™ ×•×¤×¨×˜×™

×”×‘×—×™×¨×” ×ª×œ×•×™×” ×‘×“×¨×™×©×•×ª ×”××‘×˜×—×”, ×¦×•×¨×›×™ ×ª××™××•×ª ×•×©×™×§×•×œ×™ ×¢×œ×•×ª.`,
                        pageId: "1",
                        score: 0.83
                    },
                    {
                        chunkId: "cloud-2",
                        chunkContent: `### ××¨×›×™×˜×§×˜×•×¨×ª Microservices

Microservices ××¤×¨×§×™× ×™×™×©×•××™× ×œ×©×™×¨×•×ª×™× ×§×˜× ×™× ×”× ×™×ª× ×™× ×œ×¤×¨×™×¡×” ×‘××•×¤×Ÿ ×¢×¦×××™:

**×××¤×™×™× ×™×:**
- ×¢×§×¨×•×Ÿ ×”××—×¨×™×•×ª ×”×™×—×™×“×”
- ×¦×™××•×“ ×¨×•×¤×£ ×‘×™×Ÿ ×©×™×¨×•×ª×™×
- ×¤×¨×™×¡×” ×•×’×“×™×œ×” ×¢×¦×××™×•×ª
- ×’×™×•×•×Ÿ ×˜×›× ×•×œ×•×’×™ (Polyglot)

**×“×¤×•×¡×™ ×ª×§×©×•×¨×ª:**
\`\`\`
REST APIs    â†’ ×¡×™× ×›×¨×•× ×™, ×‘×§×©×”/×ª×’×•×‘×”
Message Queue â†’ ××¡×™× ×›×¨×•× ×™, ××•× ×—×” ××™×¨×•×¢×™×
gRPC         â†’ ×‘×™×¦×•×¢×™× ×’×‘×•×”×™×, ×¤×¨×•×˜×•×§×•×œ ×‘×™× ××¨×™
\`\`\`

×œ×›×œ ××™×§×¨×•-×©×™×¨×•×ª ×™×© ×‘×“×¨×š ×›×œ×œ ××¡×“ × ×ª×•× ×™× ××©×œ×• ×›×“×™ ×œ×”×‘×˜×™×— ×¦×™××•×“ ×¨×•×¤×£. API gateways ××¡×¤×§×™× × ×§×•×“×ª ×›× ×™×¡×” ××—×™×“×” ×œ×œ×§×•×—×•×ª.`,
                        pageId: "8",
                        score: 0.80
                    },
                    {
                        chunkId: "cloud-3",
                        chunkContent: `### ×ª×–××•×¨ ×§×•× ×˜×™×™× ×¨×™× ×¢× Kubernetes

Kubernetes ××‘×¦×¢ ××•×˜×•××¦×™×” ×©×œ ×¤×¨×™×¡×”, ×’×“×™×œ×” ×•× ×™×”×•×œ ×©×œ ×™×™×©×•××™× ××‘×•×¡×¡×™ ×§×•× ×˜×™×™× ×¨×™×.

**×¨×›×™×‘×™ ×œ×™×‘×”:**
- **Pod**: ×™×—×™×“×ª ×”×¤×¨×™×¡×” ×”×§×˜× ×” ×‘×™×•×ª×¨ (×§×•× ×˜×™×™× ×¨ ××—×“ ××• ×™×•×ª×¨)
- **Deployment**: ×× ×”×œ ×¢×•×ª×§×™ ×¤×•×“×™× ×•×¢×“×›×•× ×™×
- **Service**: ×—×•×©×£ ×¤×•×“×™× ×œ×ª×¢×‘×•×¨×ª ×¨×©×ª
- **Ingress**: ×× ×ª×‘ ×ª×¢×‘×•×¨×ª HTTP(S) ×—×™×¦×•× ×™×ª

**××¡×˜×¨×˜×’×™×•×ª ×’×“×™×œ×”:**
1. Horizontal Pod Autoscaler (HPA): ××‘×•×¡×¡ ×¢×œ ××¢×‘×“/×–×™×›×¨×•×Ÿ
2. Vertical Pod Autoscaler (VPA): ××ª××™× ×‘×§×©×•×ª ××©××‘×™×
3. Cluster Autoscaler: ××•×¡×™×£/××¡×™×¨ ×¦××ª×™×

> ××©×›×•×œ×•×ª ×™×™×¦×•×¨ ×¦×¨×™×›×™× ×œ×”×ª×¤×¨×¡ ×¢×œ ×¤× ×™ ××¡×¤×¨ ××–×•×¨×™ ×–××™× ×•×ª ×œ×–××™× ×•×ª ×’×‘×•×”×”.`,
                        pageId: "15",
                        score: 0.77
                    },
                    {
                        chunkId: "cloud-4",
                        chunkContent: `### ×ª×©×ª×™×ª ×›×§×•×“ (IaC)

IaC ×××¤×©×¨ ×œ× ×”×œ ×ª×©×ª×™×•×ª ×‘×××¦×¢×•×ª ×§×‘×¦×™ ×ª×¦×•×¨×” ×§×¨×™××™× ×œ××›×•× ×”:

| ×›×œ×™ | ×¡×¤×§ | ×©×¤×” |
|------|----------|----------|
| Terraform | Multi-cloud | HCL |
| CloudFormation | AWS | YAML/JSON |
| Pulumi | Multi-cloud | TypeScript/Python |
| ARM Templates | Azure | JSON |

**×™×ª×¨×•× ×•×ª:**
- ×‘×§×¨×ª ×’×¨×¡××•×ª ×œ×ª×©×ª×™×ª
- ×¤×¨×™×¡×•×ª ×—×–×¨×•×ª
- ×”×¤×—×ª×ª ×¡×—×£ ×‘×”×’×“×¨×•×ª (configuration drift)
- ×ª×©×ª×™×ª ×”××ª×¢×“×ª ××ª ×¢×¦××”

×©×™×˜×” ××•××œ×¦×ª: ××—×¡×Ÿ ×§×‘×¦×™ ××¦×‘ (state files) ××¨×—×•×§ ×•×”×©×ª××© ×‘× ×¢×™×œ×” ×œ×× ×™×¢×ª ×©×™× ×•×™×™× ×‘××§×‘×™×œ.`,
                        pageId: "22",
                        score: 0.74
                    },
                    {
                        chunkId: "cloud-5",
                        chunkContent: `### ×ª×‘× ×™×•×ª ××—×©×•×‘ ×œ×œ× ×©×¨×ª (Serverless)

××¨×›×™×˜×§×˜×•×¨×ª Serverless ××‘×˜×œ×ª ××ª ×ª×§×•×¨×” ×©×œ × ×™×”×•×œ ×©×¨×ª×™×:

**××§×¨×™ ×©×™××•×©:**
- ×¢×™×‘×•×“ ××•× ×—×” ××™×¨×•×¢×™× (×”×¢×œ××ª ×§×‘×¦×™×, webhooks)
- ×¦×“ ×©×¨×ª ×©×œ API ×¢× ×ª×¢×‘×•×¨×” ××©×ª× ×”
- ××©×™××•×ª ××ª×•×–×× ×•×ª ×•×¢×™×‘×•×“ ×‘××¦×•×•×”
- ×”××¨×ª × ×ª×•× ×™× ×‘×–××Ÿ ×××ª

**×©×™×§×•×œ×™×:**
- ×”×©×”×™×™×ª ×”×ª×—×œ×” ×§×¨×” (×¢×™×›×•×‘ ×”×ª×—×œ×ª×™)
- ××’×‘×œ×•×ª ×–××Ÿ ×‘×™×¦×•×¢ (×‘×“×¨×š ×›×œ×œ ××§×¡×™××•× 15 ×“×§×•×ª)
- ×“×¨×™×©×ª ×¢×™×¦×•×‘ ×—×¡×¨ ××¦×‘ (Stateless)
- ×—×©×©×•×ª ×× ×¢×™×œ×ª ×¡×¤×§

×¤×•× ×§×¦×™×•×ª ×¦×¨×™×›×•×ª ×œ×”×™×•×ª ×§×˜× ×•×ª, ×××•×§×“×•×ª ×•××™×“××¤×•×˜× ×˜×™×•×ª. ×”×©×ª××© ×‘×©×™×¨×•×ª×™× ×× ×•×”×œ×™× ×œ××¡×“×™ × ×ª×•× ×™×, ×ª×•×¨×™× ×•××—×¡×•×Ÿ ×›×“×™ ×œ××–×¢×¨ ××ª ×”×¢×•××¡ ×”×ª×¤×¢×•×œ×™.`,
                        pageId: "28",
                        score: 0.71
                    },
                    {
                        chunkId: "cloud-6",
                        chunkContent: `### × ×¨××•×ª ×•× ×™×˜×•×¨ (Observability)

×¤×¢×•×œ×•×ª ×¢× ×Ÿ ×™×¢×™×œ×•×ª ×“×•×¨×©×•×ª × ×¨××•×ª ××§×™×¤×”:

**×©×œ×•×©×ª ×¢××•×“×™ ×”×ª×•×•×š:**
1. **××“×“×™× (Metrics)**: ××“×™×“×•×ª ×›××•×ª×™×•×ª (××¢×‘×“, ×”×©×”×™×”, ×©×™×¢×•×¨×™ ×©×’×™××”)
2. **×œ×•×’×™× (Logs)**: ×¨×©×•××•×ª ××™×¨×•×¢×™× ×‘×“×™×“×•×ª ×¢× ×”×§×©×¨
3. **×¢×§×‘×•×ª (Traces)**: ×–×¨×™××ª ×‘×§×©×•×ª ×¢×œ ×¤× ×™ ×©×™×¨×•×ª×™× ××‘×•×–×¨×™×

**×©×™×˜×•×ª ××¤×ª×—:**
- ×”×˜××¢×ª ×¨×™×©×•× ×œ×•×’×™× ××•×‘× ×” ×¢× ××–×”×™ ××ª×× (correlation IDs)
- ×”×’×“×¨×ª ×”×ª×¨××•×ª ×¢×œ ×‘×¡×™×¡ SLIs (××™× ×“×™×§×˜×•×¨×™× ×œ×¨××ª ×©×™×¨×•×ª)
- ×©×™××•×© ×‘××¢×§×‘ ××‘×•×–×¨ ×œ× ×™×¤×•×™ ×‘××’×™× ×‘××™×§×¨×•-×©×™×¨×•×ª×™×
- ×™×¦×™×¨×ª ×œ×•×—×•×ª ××—×•×•× ×™× ×œ××“×“×™× ×¢×¡×§×™×™× ×•×˜×›× ×™×™× ××¨×›×–×™×™×

\`\`\`yaml
# Example Prometheus alert rule
- alert: HighErrorRate
  expr: rate(http_requests_total{status="500"}[5m]) > 0.1
  for: 5m
\`\`\``,
                        pageId: "35",
                        score: 0.68
                    },
                    {
                        chunkId: "cloud-7",
                        chunkContent: `### ××¡×˜×¨×˜×’×™×•×ª ××•×¤×˜×™××™×–×¦×™×” ×©×œ ×¢×œ×•×™×•×ª

×¢×œ×•×™×•×ª ×¢× ×Ÿ ×™×›×•×œ×•×ª ×œ×’×“×•×œ ×‘××”×™×¨×•×ª ×œ×œ× ×¤×™×§×•×— ××ª××™×:

**×˜×›× ×™×§×•×ª ××•×¤×˜×™××™×–×¦×™×”:**
- ×”×ª×××ª ×’×•×“×œ ××•×¤×¢×™× (Right-sizing) ×¢×œ ×¡××š × ×™×¦×•×œ ×‘×¤×•×¢×œ
- ×©×™××•×© ×‘××•×¤×¢×™× ×©××•×¨×™× (Reserved Instances) ×¢×‘×•×¨ ×¢×•××¡×™ ×¢×‘×•×“×” ×¦×¤×•×™×™×
- ×™×™×©×•× ×’×“×™×œ×” ××•×˜×•××˜×™×ª (auto-scaling) ×œ×”×ª×××” ×œ×‘×™×§×•×©
- ×ª×–××•×Ÿ ××©××‘×™× ×©××™× × ×‘×™×™×¦×•×¨ (×›×™×‘×•×™ ×‘×¡×‘×™×‘×•×ª ×¤×™×ª×•×—/×‘×“×™×§×•×ª)
- × ×™×¦×•×œ ××•×¤×¢×™ Spot ×¢×‘×•×¨ ×¢×•××¡×™ ×¢×‘×•×“×” ×¢××™×“×™× ×‘×¤× ×™ ×ª×§×œ×•×ª

**××¡×˜×¨×˜×’×™×™×ª ×ª×™×•×’:**
- ×¡×‘×™×‘×” (prod, staging, dev)
- ××¨×›×– ×¢×œ×•×ª / ×¤×¨×•×™×§×˜
- ×‘×¢×œ×™× / ×¦×•×•×ª
- ×©× ×™×™×©×•×

×¡×§×™×¨×•×ª ×¢×œ×•×ª ×¨×’×™×œ×•×ª ×•× ×”×œ×™ FinOps ×¢×•×–×¨×™× ×œ×©××•×¨ ×¢×œ ×”×ª×××” ×œ×ª×§×¦×™×‘.`,
                        pageId: "42",
                        score: 0.65
                    }
                ]
            },
            {
                documentId: "doc-project",
                fileName: "××“×¨×™×š-×œ× ×™×”×•×œ-×¤×¨×•×™×§×˜×™×.pdf",
                fileType: "application/pdf",
                size: 1542000,
                sourcePath: "/management/project-management-handbook.pdf",
                score: 0.78,
                chunks: [
                    {
                        chunkId: "pm-1",
                        chunkContent: `## ××ª×•×“×•×œ×•×’×™×•×ª × ×™×”×•×œ ×¤×¨×•×™×§×˜×™×

×‘×—×™×¨×ª ×”××ª×•×“×•×œ×•×’×™×” ×”× ×›×•× ×” ×ª×œ×•×™×” ×‘×××¤×™×™× ×™ ×”×¤×¨×•×™×§×˜ ×•×‘×ª×¨×‘×•×ª ×”××¨×’×•× ×™×ª.

### ××¤×œ ×”××™× (Waterfall)

×©×œ×‘×™× ×¡×“×¨×ª×™×™× ×¢× ××¡×™×¨×•×ª ×‘×¨×•×¨×•×ª:
1. ×“×¨×™×©×•×ª â† 2. ×¢×™×¦×•×‘ â† 3. ×™×™×©×•× â† 4. ×‘×“×™×§×•×ª â† 5. ×¤×¨×™×¡×”

**×”×˜×•×‘ ×‘×™×•×ª×¨ ×¢×‘×•×¨:** ×¤×¨×•×™×§×˜×™× ×¢× ×“×¨×™×©×•×ª ××•×’×“×¨×•×ª ×”×™×˜×‘ ×•×™×¦×™×‘×•×ª.

### ××’'×™×™×œ (Agile)

×¤×™×ª×•×— ××™×˜×¨×˜×™×‘×™ ×¢× ××©×•×‘ ××ª××©×š:
- ×¡×¤×¨×™× ×˜×™× ×§×¦×¨×™× (1-4 ×©×‘×•×¢×•×ª)
- ×”×“×’××•×ª ×§×‘×•×¢×•×ª ×œ×‘×¢×œ×™ ×”×¢× ×™×™×Ÿ
- ×ª×›× ×•×Ÿ ××¡×ª×’×œ

**×”×˜×•×‘ ×‘×™×•×ª×¨ ×¢×‘×•×¨:** ×¤×¨×•×™×§×˜×™× ×¢× ×“×¨×™×©×•×ª ××ª×¤×ª×—×•×ª ××• ××™×§×•×“ ×‘×—×“×©× ×•×ª.`,
                        pageId: "4",
                        score: 0.76
                    },
                    {
                        chunkId: "pm-2",
                        chunkContent: `### × ×™×”×•×œ ×‘×¢×œ×™ ×¢× ×™×™×Ÿ

××¢×•×¨×‘×•×ª ×™×¢×™×œ×” ×©×œ ×‘×¢×œ×™ ×¢× ×™×™×Ÿ ×—×™×•× ×™×ª ×œ×”×¦×œ×—×ª ×”×¤×¨×•×™×§×˜:

**××˜×¨×™×¦×ª × ×™×ª×•×— ×‘×¢×œ×™ ×¢× ×™×™×Ÿ:**

| ×›×•×—/×¢× ×™×™×Ÿ | ×¢× ×™×™×Ÿ × ××•×š | ×¢× ×™×™×Ÿ ×’×‘×•×” |
|-----------|------------|------------|
| ×›×•×— ×’×‘×•×” | ×©××•×¨ ×¢×œ ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ | × ×”×œ ××§×¨×•×‘ |
| ×›×•×— × ××•×š | × ×˜×¨ | ×¢×“×›×Ÿ ×‘××•×¤×Ÿ ×©×•×˜×£ |

**×¨×›×™×‘×™ ×ª×•×›× ×™×ª ×ª×§×©×•×¨×ª:**
- ×©× ×•×ª×¤×§×™×“ ×‘×¢×œ ×”×¢× ×™×™×Ÿ
- ×¦×¨×›×™ ××™×“×¢
- ×ª×“×™×¨×•×ª ×”×¢×“×›×•× ×™×
- ×¢×¨×•×¥ ×ª×§×©×•×¨×ª
- ×’×•×¨× ××—×¨××™

×ª×¢×“ ××ª ×¦×™×¤×™×•×ª ×‘×¢×œ×™ ×”×¢× ×™×™×Ÿ ×‘×©×œ×‘ ××•×§×“× ×•×‘×—×Ÿ ××•×ª×Ÿ ××—×“×© ×œ××•×¨×š ××—×–×•×¨ ×—×™×™ ×”×¤×¨×•×™×§×˜.`,
                        pageId: "12",
                        score: 0.73
                    },
                    {
                        chunkId: "pm-3",
                        chunkContent: `### ×ª×”×œ×™×š × ×™×”×•×œ ×¡×™×›×•× ×™×

× ×™×”×•×œ ×¡×™×›×•× ×™× ×™×–×•× ××•× ×¢ ××‘×¢×™×•×ª ×œ×©×‘×© ×¤×¨×•×™×§×˜×™×:

1. **×–×™×”×•×™**: ×¡×™×¢×•×¨ ××•×—×•×ª ×œ×’×‘×™ ×¡×™×›×•× ×™× ×¤×•×˜× ×¦×™××œ×™×™× ×¢× ×”×¦×•×•×ª
2. **× ×™×ª×•×—**: ×”×¢×¨×›×ª ×”×¡×ª×‘×¨×•×ª ×•×”×©×¤×¢×”
3. **×ª×¢×“×•×£**: ×”×ª××§×“×•×ª ×‘×¡×™×›×•× ×™× ×‘×¢×“×™×¤×•×ª ×’×‘×•×”×”
4. **×ª×›× ×•×Ÿ**: ×¤×™×ª×•×— ××¡×˜×¨×˜×’×™×•×ª ×ª×’×•×‘×”
5. **× ×™×˜×•×¨**: ××¢×§×‘ ××—×¨ ×¡×™×›×•× ×™× ×œ××•×¨×š ×”×¤×¨×•×™×§×˜

**××¡×˜×¨×˜×’×™×•×ª ×ª×’×•×‘×”:**
- **×”×™×× ×¢×•×ª**: ×‘×™×˜×•×œ ×”××™×•×
- **×”×¤×—×ª×”**: ×¦××¦×•× ×”×”×¡×ª×‘×¨×•×ª ××• ×”×”×©×¤×¢×”
- **×”×¢×‘×¨×”**: ×”×¢×‘×¨×ª ×”×¡×™×›×•×Ÿ ×œ×¦×“ ×©×œ×™×©×™ (×‘×™×˜×•×—, ×—×•×–×™×)
- **×§×‘×œ×”**: ×”×›×¨×” ×‘×¡×™×›×•×Ÿ ×•×”×›× ×ª ×ª×•×›× ×™×ª ××’×™×¨×”

> × ×”×œ ×™×•××Ÿ ×¡×™×›×•× ×™× ×•×¡×§×•×¨ ××•×ª×• ××“×™ ×©×‘×•×¢ ×‘××”×œ×š ×™×©×™×‘×•×ª ×¡×˜×˜×•×¡.`,
                        pageId: "18",
                        score: 0.70
                    },
                    {
                        chunkId: "pm-4",
                        chunkContent: `### ×ª×›× ×•×Ÿ ×•×”×§×¦××ª ××©××‘×™×

×”×§×¦××ª ××©××‘×™× ××•×¤×˜×™××œ×™×ª ××‘×˜×™×—×” ××ª ×”×¦×œ×—×ª ×”×¤×¨×•×™×§×˜ ×œ×œ× ×©×—×™×§×”:

**×ª×›× ×•×Ÿ ×§×™×‘×•×œ×ª:**
- ×—×™×©×•×‘ ×©×¢×•×ª ×–××™× ×•×ª ×œ×›×œ ×—×‘×¨ ×¦×•×•×ª
- ×”×ª×—×©×‘×•×ª ×‘×¤×’×™×©×•×ª, ××©×™××•×ª × ×™×”×•×œ ×•×—×•×¤×©×•×ª
- ×ª×›× ×•×Ÿ ×œ× ×™×¦×•×œ×ª ×©×œ 70-80% ×›×“×™ ×œ××¤×©×¨ ×’××™×©×•×ª

**××™×–×•×Ÿ ××©××‘×™× (Resource Leveling):**
×›××©×¨ ××©××‘×™× ××•×§×¦×™× ×™×ª×¨ ×¢×œ ×”××™×“×”:
1. ×”××¨×›×ª ××©×š ×”××©×™××•×ª
2. ×”×ª×××ª ×ª×œ×•×ª ×‘×™×Ÿ ××©×™××•×ª
3. ×”×•×¡×¤×ª ××©××‘×™× (×¢× ×§×œ×™×˜×” ×–×”×™×¨×”)
4. ×¦××¦×•× ×”×™×§×£ (×‘××™×©×•×¨ ×‘×¢×œ×™ ×¢× ×™×™×Ÿ)

×”×©×ª××© ×‘×”×™×¡×˜×•×’×¨××•×ª ××©××‘×™× ×›×“×™ ×œ×”××—×™×© ××ª ×”×”×§×¦××” ×œ××•×¨×š ×–××Ÿ ×•×œ×–×”×•×ª ×¦×•×•××¨×™ ×‘×§×‘×•×§ ××•×§×“×.`,
                        pageId: "25",
                        score: 0.67
                    },
                    {
                        chunkId: "pm-5",
                        chunkContent: `### ×“×™×•×•×— ×¡×˜×˜×•×¡ ×¤×¨×•×™×§×˜

×“×•×—×•×ª ×¡×˜×˜×•×¡ ×¡×“×™×¨×™× ×©×•××¨×™× ×¢×œ ×‘×¢×œ×™ ×¢× ×™×™×Ÿ ××¢×•×“×›× ×™× ×•×¢×œ ×¤×¨×•×™×§×˜×™× ×‘××¡×œ×•×œ.

**×¤×•×¨××˜ ×ª×§×¦×™×¨ ×× ×”×œ×™×:**
\`\`\`
×¡×˜×˜×•×¡: ğŸŸ¢ ×™×¨×•×§ / ğŸŸ¡ ×¦×”×•×‘ / ğŸ”´ ××“×•×
×ª×§×¦×™×‘: X$ ×”×•×¦××• ××ª×•×š Y$ ×©×”×•×§×¦×• (X%)
×œ×•×— ×–×× ×™×: ×‘××¡×œ×•×œ / X ×™××™× ×‘××™×—×•×¨
×”×™×©×’×™× ××¨×›×–×™×™×: [× ×§×•×“×•×ª]
××‘× ×™ ×“×¨×š ×§×¨×•×‘×•×ª: [×‘×©×‘×•×¢×™×™× ×”×§×¨×•×‘×™×]
×¡×™×›×•× ×™×/×‘×¢×™×•×ª: [3 ×”×¢×œ×™×•× ×™× ×¢× ×ª×•×›× ×™×ª ×”×¤×—×ª×”]
×”×—×œ×˜×•×ª × ×“×¨×©×•×ª: [×× ×™×©]
\`\`\`

**×©×™×˜×•×ª ××•××œ×¦×•×ª:**
- ×©×œ×— ×“×•×—×•×ª ×‘××¨×•×•×—×™ ×–××Ÿ ×¢×§×‘×™×™× (×©×‘×•×¢×™/×“×•-×©×‘×•×¢×™)
- ×”×ª×—×œ ×¢× ×”××™×“×¢ ×”×—×©×•×‘ ×‘×™×•×ª×¨
- ×”×™×” ×›× ×” ×œ×’×‘×™ ××ª×’×¨×™× - ×œ×œ× ×”×¤×ª×¢×•×ª
- ×›×œ×•×œ ×ª×¨×©×™××™× ×•×™×–×•××œ×™×™× ×œ×¡×¨×™×§×” ××”×™×¨×”`,
                        pageId: "31",
                        score: 0.64
                    }
                ]
            },
            {
                documentId: "doc-api",
                fileName: "×§×•×•×™×-×× ×—×™×-×œ×¢×¢×™×¦×•×‘-api.pdf",
                fileType: "application/pdf",
                size: 987000,
                sourcePath: "/engineering/standards/api-design-guidelines.pdf",
                score: 0.72,
                chunks: [
                    {
                        chunkId: "api-1",
                        chunkContent: `## ×¢×§×¨×•× ×•×ª ×¢×™×¦×•×‘ API ×‘×’×™×©×ª RESTful

REST (Representational State Transfer) ××¡×¤×§ ×’×™×©×” ×¡×˜× ×“×¨×˜×™×ª ×œ×¢×™×¦×•×‘ API.

### ×¢×§×¨×•× ×•×ª ×œ×™×‘×”

1. **×—×•×¡×¨ ××–×™×›×¨×•×Ÿ (Statelessness)**: ×›×œ ×‘×§×©×” ××›×™×œ×” ××ª ×›×œ ×”××™×“×¢ ×”×“×¨×•×©
2. **×œ×§×•×—-×©×¨×ª**: ×”×¤×¨×“×ª ×“××’×•×ª
3. **×××©×§ ××—×™×“**: ×–×™×”×•×™ ××©××‘×™× ×¢×§×‘×™
4. **××¢×¨×›×ª ×©×›×‘×ª×™×ª**: ××•×ª×¨×™× ×©×¨×ª×™ ×‘×™× ×™×™×

### ××ª×Ÿ ×©××•×ª ×œ××©××‘×™×

×”×©×ª××© ×‘×©××•×ª ×¢×¦×, ×œ× ×‘×¤×¢×œ×™×:
- âœ… \`GET /users\` â€” ××—×–×¨ ××©×ª××©×™×
- âœ… \`POST /orders\` â€” ×¦×•×¨ ×”×–×× ×”
- âŒ \`GET /getUsers\` â€” ×”×™×× ×¢ ××¤×¢×œ×™×
- âŒ \`POST /createOrder\` â€” ××™×•×ª×¨

×”×©×ª××© ×‘×©××•×ª ×¢×¦× ×‘×¨×‘×™× ×œ××•×¡×¤×™×: \`/users\`, \`/products\`, \`/orders\``,
                        pageId: "3",
                        score: 0.70
                    },
                    {
                        chunkId: "api-2",
                        chunkContent: `### ×©×™×˜×•×ª HTTP ×•×§×•×“×™ ×¡×˜×˜×•×¡

**×©×™×˜×•×ª ×¡×˜× ×“×¨×˜×™×•×ª:**

| ×©×™×˜×” | ××˜×¨×” | ××™×“××¤×•×˜× ×˜×™ |
|--------|---------|------------|
| GET | ××—×–×•×¨ ××©××‘ | ×›×Ÿ |
| POST | ×™×¦×™×¨×ª ××©××‘ | ×œ× |
| PUT | ×”×—×œ×¤×ª ××©××‘ | ×›×Ÿ |
| PATCH | ×¢×“×›×•×Ÿ ×—×œ×§×™ | ×›×Ÿ |
| DELETE | ×”×¡×¨×ª ××©××‘ | ×›×Ÿ |

**×§×•×“×™ ×¡×˜×˜×•×¡ × ×¤×•×¦×™×:**
- \`200 OK\` â€” ×”×¦×œ×—×” (GET/PUT/PATCH)
- \`201 Created\` â€” × ×•×¦×¨ ×‘×”×¦×œ×—×” (POST)
- \`204 No Content\` â€” ×”×¦×œ×—×” ×œ×œ× ×ª×•×›×Ÿ (DELETE)
- \`400 Bad Request\` â€” ×©×’×™××ª ×œ×§×•×—
- \`401 Unauthorized\` â€” × ×“×¨×© ××™××•×ª
- \`404 Not Found\` â€” ×”××©××‘ ×œ× ×§×™×™×
- \`500 Internal Error\` â€” ×©×’×™××ª ×©×¨×ª`,
                        pageId: "7",
                        score: 0.67
                    },
                    {
                        chunkId: "api-3",
                        chunkContent: `### ×“×¤×“×•×£ (Pagination) ×•×¡×™× ×•×Ÿ

××•×¡×¤×™× ×’×“×•×œ×™× ×“×•×¨×©×™× ×“×¤×“×•×£ ×›×“×™ ×œ×©××•×¨ ×¢×œ ×‘×™×¦×•×¢×™×:

**×“×¤×“×•×£ ××‘×•×¡×¡ ×”×™×¡×˜ (Offset-based):**
\`\`\`
GET /users?page=2&limit=20
\`\`\`

**×“×¤×“×•×£ ××‘×•×¡×¡ ×¡××Ÿ (Cursor-based):**
\`\`\`
GET /users?cursor=abc123&limit=20
\`\`\`

> ×“×¤×“×•×£ ××‘×•×¡×¡ ×¡××Ÿ ××•×¢×“×£ ×œ× ×ª×•× ×™× ×‘×–××Ÿ ×××ª ×•×œ××¢×¨×›×™ × ×ª×•× ×™× ×’×“×•×œ×™×.

**×¡×™× ×•×Ÿ ×•××™×•×Ÿ:**
\`\`\`
GET /products?category=electronics&min_price=100&sort=-created_at
\`\`\`

×”×©×ª××© ×‘×¤×¨××˜×¨×™ ×©××™×œ×ª×” ×œ×¡×™× ×•×Ÿ, ××™×•×Ÿ ×•×‘×—×™×¨×ª ×©×“×•×ª. ×ª×¢×“ ××ª ×”×¤×¨××˜×¨×™× ×”×–××™× ×™× ×‘×‘×™×¨×•×¨ ×‘×ª×™×¢×•×“ ×”-API.`,
                        pageId: "12",
                        score: 0.64
                    },
                    {
                        chunkId: "api-4",
                        chunkContent: `### ×˜×™×¤×•×œ ×‘×©×’×™××•×ª

×ª×’×•×‘×•×ª ×©×’×™××” ×¢×§×‘×™×•×ª ××¡×™×™×¢×•×ª ×œ×¦×¨×›× ×™ API:

\`\`\`json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid request parameters",
    "details": [
      {
        "field": "email",
        "message": "Must be a valid email address"
      },
      {
        "field": "age",
        "message": "Must be a positive integer"
      }
    ],
    "requestId": "req-abc123"
  }
}
\`\`\`

**×§×•×•×™× ×× ×—×™×:**
- ×”×©×ª××© ×‘××‘× ×” ×©×’×™××” ×¢×§×‘×™ ×‘×›×œ × ×§×•×“×•×ª ×”×§×¦×”
- ×›×œ×•×œ ×§×•×“×™ ×©×’×™××” ×§×¨×™××™× ×œ××›×•× ×”
- ×¡×¤×§ ×”×•×“×¢×•×ª ×§×¨×™××•×ª ×œ×‘× ×™ ××“×
- ×”×•×¡×£ ××–×”×™ ×‘×§×©×” ×œ× ×™×¤×•×™ ×‘××’×™×
- ×œ×¢×•×œ× ××œ ×ª×—×©×•×£ ×¢×§×‘×•×ª ××—×¡× ×™×ª (stack traces) ×¤× ×™××™×™× ×‘×™×™×¦×•×¨`,
                        pageId: "18",
                        score: 0.61
                    },
                    {
                        chunkId: "api-5",
                        chunkContent: `### ××¡×˜×¨×˜×’×™×•×ª ×’×¨×¡××•×ª API

×××©×§×™ API ××ª×¤×ª×—×™× ×¢× ×”×–××Ÿ; ×’×¨×¡××•×ª ××‘×˜×™×—×•×ª ×ª××™××•×ª ×œ××—×•×¨:

**×’×¨×¡×” ×‘× ×ª×™×‘ URL:**
\`\`\`
GET /v1/users
GET /v2/users
\`\`\`
*×™×ª×¨×•× ×•×ª:* ×‘×¨×•×¨, ×§×œ ×œ×™×™×©×•×
*×—×¡×¨×•× ×•×ª:* ××–×”× ××ª ××¨×—×‘ ×”-URL

**×’×¨×¡×” ×‘×›×•×ª×¨×ª (Header):**
\`\`\`
GET /users
Accept: application/vnd.api+json;version=2
\`\`\`
*×™×ª×¨×•× ×•×ª:* ×›×ª×•×‘×•×ª URL × ×§×™×•×ª
*×—×¡×¨×•× ×•×ª:* ×¤×—×•×ª ×’×™×œ×•×™ (Discoverable)

**×¤×¨××˜×¨ ×©××™×œ×ª×”:**
\`\`\`
GET /users?version=2
\`\`\`

**×”××œ×¦×”:** ×’×¨×¡×” ×‘× ×ª×™×‘ URL ×”×™× ×”× ×¤×•×¦×” ×‘×™×•×ª×¨ ×•×”×§×œ×” ×‘×™×•×ª×¨ ×œ×”×‘× ×” ×¢×‘×•×¨ ×¦×¨×›× ×™×. ×ª××•×š ×œ×¤×—×•×ª ×‘×’×¨×¡×” ×§×•×“××ª ××—×ª ×‘××”×œ×š ×ª×§×•×¤×•×ª ×”×•×¦××” ××©×™××•×© (deprecation).`,
                        pageId: "24",
                        score: 0.58
                    },
                    {
                        chunkId: "api-6",
                        chunkContent: `### ×”×’×‘×œ×ª ×§×¦×‘ (Rate Limiting)

×”×’×Ÿ ×¢×œ APIs ××¤× ×™ × ×™×¦×œ ×œ×¨×¢×” ×•×”×‘×˜×— ×©×™××•×© ×”×•×’×Ÿ:

**×›×•×ª×¨×•×ª ×ª×’×•×‘×”:**
\`\`\`
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 994
X-RateLimit-Reset: 1640995200
Retry-After: 60
\`\`\`

**××¡×˜×¨×˜×’×™×•×ª:**
- **×—×œ×•×Ÿ ×§×‘×•×¢**: ×¡×¤×™×¨×ª ×‘×§×©×•×ª ×œ×›×œ ×—×œ×•×Ÿ ×–××Ÿ (×œ××©×œ, 1000/×©×¢×”)
- **×—×œ×•×Ÿ ×”×–×–×”**: ×¤×¨×§ ×–××Ÿ ××ª×’×œ×’×œ ×œ××’×‘×œ×•×ª ×—×œ×§×•×ª ×™×•×ª×¨
- **×“×œ×™ ××¡×™××•× ×™× (Token Bucket)**: ×××¤×©×¨ ×¤×¨×¦×™× ×ª×•×š ×”×’×‘×œ×ª ×”×§×¦×‘ ×”××ª××©×š

×”×—×–×¨ \`429 Too Many Requests\` ×›××©×¨ ×—×•×¨×’×™× ××”××’×‘×œ×•×ª. ×ª×¢×“ ××ª ××’×‘×œ×•×ª ×”×§×¦×‘ ×‘×‘×™×¨×•×¨ ×•×¡×¤×§ ×›×•×ª×¨×ª \`Retry-After\` ×›×“×™ ×œ×¦×™×™×Ÿ ××ª×™ ×œ×§×•×—×•×ª ×™×›×•×œ×™× ×œ× ×¡×•×ª ×©×•×‘.`,
                        pageId: "28",
                        score: 0.55
                    },
                    {
                        chunkId: "api-7",
                        chunkContent: `### ×©×™×˜×•×ª ××•××œ×¦×•×ª ×œ××‘×˜×—×ª API

××‘×˜×—×ª APIs ×§×¨×™×˜×™×ª ×œ×”×’× ×” ×¢×œ × ×ª×•× ×™× ×•××©×ª××©×™×:

**××™××•×ª (Authentication):**
- ×”×©×ª××© ×‘-OAuth 2.0 ×¢× ××¡×™××•× ×™ JWT ×œ×™×™×©×•××™× ××•×“×¨× ×™×™×
- ×™×™×©× ×¨×•×˜×¦×™×™×ª ××¡×™××•× ×™ ×¨×¢× ×•×Ÿ (refresh token rotation)
- ×œ×¢×•×œ× ××œ ×ª×¢×‘×™×¨ ××™×©×•×¨×™× ×‘×›×ª×•×‘×•×ª URL

**×”×¨×©××” (Authorization):**
- ×××ª ×”×¨×©××•×ª ×‘×›×œ ×‘×§×©×”
- ×”×©×ª××© ×‘×‘×§×¨×ª ×’×™×©×” ××‘×•×¡×¡×ª ×˜×•×•×— (scope-based)
- ×™×™×©× ××‘×˜×—×” ×‘×¨××ª ×”×©×•×¨×” ×‘××™×“×ª ×”×¦×•×¨×š

**×ª×¢×‘×•×¨×”:**
- ××›×•×£ HTTPS ×œ×›×œ × ×§×•×“×•×ª ×”×§×¦×”
- ×”×©×ª××© ×‘-TLS 1.2+ ×¢× ×—×‘×™×œ×•×ª ×”×¦×¤× ×” ×—×–×§×•×ª
- ×™×™×©× ×”×¦××“×ª ××™×©×•×¨×™× (certificate pinning) ×œ××¤×œ×™×§×¦×™×•×ª ××•×‘×™×™×œ

**××™××•×ª ×§×œ×˜:**
- ×××ª ××ª ×›×œ ×¤×¨××˜×¨×™ ×”×§×œ×˜
- ×”×©×ª××© ×‘×¨×©×™××•×ª ×”×™×ª×¨×™× (allowlists) ×¢×œ ×¤× ×™ ×¨×©×™××•×ª ×—×¡×™××”
- × ×§×” × ×ª×•× ×™× (Sanitize) ×œ×¤× ×™ ×©××™×œ×ª×•×ª ××¡×“ × ×ª×•× ×™×`,
                        pageId: "32",
                        score: 0.52
                    },
                    {
                        chunkId: "api-8",
                        chunkContent: `### ×ª×§× ×™ ×ª×™×¢×•×“ API

×ª×™×¢×•×“ ×˜×•×‘ ×—×™×•× ×™ ×œ××™××•×¥ ×”-API:

**×¡×¢×™×¤×™× × ×“×¨×©×™×:**
1. **×¡×§×™×¨×” ×›×œ×œ×™×ª**: ××˜×¨×” ×•×ª×—×™×œ×ª ×”×¢×‘×•×“×”
2. **××™××•×ª**: ×›×™×¦×“ ×œ×”×©×™×’ ×•×œ×”×©×ª××© ×‘××™×©×•×¨×™×
3. **× ×§×•×“×•×ª ×§×¦×”**: ×”×¤× ×™×” ××œ××” ×¢× ×“×•×’×××•×ª
4. **×©×’×™××•×ª**: ×§×•×“×™ ×©×’×™××” ×•×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
5. **××’×‘×œ×•×ª ×§×¦×‘**: ××™×œ×•×¦×™ ×©×™××•×©
6. **×™×•××Ÿ ×©×™× ×•×™×™×**: ×”×™×¡×˜×•×¨×™×ª ×’×¨×¡××•×ª ×•××“×¨×™×›×™ ×”×’×™×¨×”

**××¤×¨×˜ OpenAPI (Swagger):**
\`\`\`yaml
paths:
  /users/{id}:
    get:
      summary: Get user by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Success
\`\`\`

×”×©×ª××© ×‘×›×œ×™ ×ª×™×¢×•×“ ××™× ×˜×¨××§×˜×™×‘×™×™× (Swagger UI, Redoc) ×›×“×™ ×œ××¤×©×¨ ×‘×“×™×§×•×ª ×™×©×™×¨×•×ª ××”××¡××›×™×.`,
                        pageId: "38",
                        score: 0.49
                    }
                ]
            }
        ];

        return {
            success: true,
            message: `Search successful. Found ${results.length} documents.`,
            results
        };
    },

    // Control what the model sees (simplified message)
    toModelOutput(result) {
        return {
            type: "content",
            value: [
                {
                    type: "text",
                    text: `Search successful. Found ${result.results.length} documents. The results are displayed to the user in the UI.`
                }
            ]
        };
    }
});
